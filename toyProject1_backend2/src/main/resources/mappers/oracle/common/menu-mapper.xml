<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="toy.project.apiserver.mapper.common.MenuMapper">
	
  <!-- 메뉴 트리 조회 (재귀적으로) -->
  <select id="getList" resultType="toy.project.apiserver.DTO.common.MenuAgentDTO">
	SELECT 
        id,
        upper_id,
        name,
        description AS path,
        LEVEL - 1 AS depth,
        CONNECT_BY_ISLEAF AS is_leaf
    FROM 
        menu_agent
    START WITH upper_id IS NULL
    CONNECT BY PRIOR id = upper_id
	
  </select>

</mapper>